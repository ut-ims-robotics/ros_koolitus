

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="et" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="et" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>For- ja while tsüklid roboti juhtimisel &mdash; ROS Koolitus 0.1 dokumentatsioon</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
        <script type="text/javascript" src="../_static/contentui.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/hacks.css" type="text/css" />
  <link rel="stylesheet" href="../_static/contentui.css" type="text/css" />
    <link rel="index" title="Indeks" href="../genindex.html" />
    <link rel="search" title="Otsing" href="../search.html" />
    <link rel="next" title="Funktsioonid" href="functions.html" />
    <link rel="prev" title="Programmeerime ROS roboti sõitma" href="move.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> ROS Koolitus
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">1. Päev</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../day1/linux_ylevaade.html">Linux: Ubuntu 16.04 sissejuhatus</a></li>
<li class="toctree-l1"><a class="reference internal" href="../day1/linux_kasurida.html">Linux: terminal ja käsurida</a></li>
<li class="toctree-l1"><a class="reference internal" href="../day1/linux_tarkvara_paigaldamine.html">Linux: Uue tarkvara paigaldamine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../day1/linux_programmide_kaivitamine.html">Linux: Programmide käivitamine käsurealt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../day1/ssh_robotisse.html">Kaugteel robotisse sisenemine (ssh)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../day1/roboti_draiveri_kaivitamine.html">Roboti ROS juhtprogrammi käivitamine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../day1/roboti_klaviatuurilt_juhtimine.html">Roboti juhtimine klaviatuuriga</a></li>
</ul>
<p class="caption"><span class="caption-text">2. Päev</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="sensors.html">Roboti andurite info kuvamine</a></li>
<li class="toctree-l1"><a class="reference internal" href="move.html">Programmeerime ROS roboti sõitma</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#"><em>For</em>- ja <em>while</em> tsüklid roboti juhtimisel</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#sissejuhatus">Sissejuhatus</a></li>
<li class="toctree-l2"><a class="reference internal" href="#naide">Näide</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ulesanne">Ülesanne</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="functions.html">Funktsioonid</a></li>
<li class="toctree-l1"><a class="reference internal" href="kontroller.html">Mis on kontroller?</a></li>
</ul>
<p class="caption"><span class="caption-text">3. Päev</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../day3/AR_markerid.html">AR markerid</a></li>
<li class="toctree-l1"><a class="reference internal" href="../day3/2D_mapping.html">2D kaardistamine, automaatne navigeerimine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../day3/3D_mapping.html">3D kaardistamine</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ROS Koolitus</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li><em>For</em>- ja <em>while</em> tsüklid roboti juhtimisel</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/day2/loops.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="for-ja-while-tsuklid-roboti-juhtimisel">
<h1><em>For</em>- ja <em>while</em> tsüklid roboti juhtimisel<a class="headerlink" href="#for-ja-while-tsuklid-roboti-juhtimisel" title="Püsiviit sellele pealkirjale">¶</a></h1>
<div class="section" id="sissejuhatus">
<h2>Sissejuhatus<a class="headerlink" href="#sissejuhatus" title="Püsiviit sellele pealkirjale">¶</a></h2>
<p>Eelmiste ülesannete juures andsime sõitmiseks robotile ainult ühe käsu. Aga mida teha siis, kui soovime anda robotile mitu ja neid korrata? Näiteks sõita mööda kolmnurka 10 korda või läbida lõpmatu arv kordi kaheksat.
Selleks on programmeerimises olemas tsüklid. <em>while</em>-tsüklit, ehk lõpmatut tsüklit kasutasid juba tegelikult eelmistes ülesannetes. Kiiruse muutmise käsku edastati robotile korduvalt, seni kuni programm töötas.
Robotile on turvalisuse eesmärgil sisse ehitatud nn <em>failsafe</em>, mis jätab roboti seisma, kui poole sekundi jooksul uut käsku ei tule.
Järgnevas näites edastame robotile ühe käsu kindel arv kordi ja siis teise käsku kindel arv kordi. Siinkohal tuleb appi <a class="reference external" href="https://progeopik.cs.ut.ee/07_listid.html">for-tsükkel</a>, mis kordab käske etteantud kordi.</p>
</div>
<div class="section" id="naide">
<h2>Näide<a class="headerlink" href="#naide" title="Püsiviit sellele pealkirjale">¶</a></h2>
<p>Pythonis saame tsüklit kasutada nii:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">30</span><span class="p">):</span>
  <span class="n">vel_msg</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mf">0.2</span>
  <span class="n">vel_msg</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="n">vel_msg</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="n">velocity_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">vel_msg</span><span class="p">)</span>
  <span class="n">rospy</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
</pre></div>
</div>
<p>Iga 0.1 sekundi tagant saadame robotile sõnumi, et ta sõidaks edasi kiirusega 0.2 <em>m/s</em> ja seda täpselt 30 korda ehk kokku 3 sekundit.</p>
<p>Kui me lisame teise <em>for</em>-tsükli sinna otsa, siis järgmised 30 korda öeldakse robotile, et ta sõidaks kiirusega 0.2 <em>m/s</em> tagasi.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">30</span><span class="p">):</span>
  <span class="n">vel_msg</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mf">0.2</span>
  <span class="n">vel_msg</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="n">vel_msg</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="n">velocity_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">vel_msg</span><span class="p">)</span>
  <span class="n">rospy</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">30</span><span class="p">):</span>
  <span class="n">vel_msg</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.2</span>
  <span class="n">vel_msg</span><span class="o">.</span><span class="n">linear</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="n">vel_msg</span><span class="o">.</span><span class="n">angular</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="mi">0</span>
  <span class="n">velocity_publisher</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">vel_msg</span><span class="p">)</span>
  <span class="n">rospy</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
</pre></div>
</div>
<p>Nii saab erinevaid käske üksteise otsa lisada. Muutes <code class="code docutils literal notranslate"><span class="pre">range(0,30)</span></code> numbrit 30, saame määrata, kui pikalt ühte käsku täidetakse.</p>
</div>
<div class="section" id="ulesanne">
<h2>Ülesanne<a class="headerlink" href="#ulesanne" title="Püsiviit sellele pealkirjale">¶</a></h2>
<p>Ülesanne on panna robot sõitma igavesti mööda ruudukujulist ala.</p>
<ol class="arabic simple">
<li>Kasuta ROS käsku <code class="code docutils literal notranslate"><span class="pre">roscd</span></code> ja navigeeri ROS kimpu <code class="code docutils literal notranslate"><span class="pre">ros_koolitus</span></code>.</li>
<li>Ava <code class="code docutils literal notranslate"><span class="pre">nano</span></code> abil fail <code class="code docutils literal notranslate"><span class="pre">loops.py</span></code>, mille leiad alamkaustast <code class="code docutils literal notranslate"><span class="pre">scripts/</span></code>.</li>
<li>Leia failist muutmiseks ettenähtud ala ja kombineeri eelneva näite põhjal programm, mis läbib ühe ruudu ning ja jõuab tagasi algasendisse.</li>
<li>Ümbritse ruudu läbimise kood <em>while</em>-tsükliga, et panna robot igavesti ruutu sõitma.</li>
<li>Testi loodud programmi Gazebo simulatsiooni abil.</li>
<li>Kui Gazeboga teeb programm seda, mis ette nähtud, siis testi seda robotiga (kas otse sülearvutist või kopeerides programmi robotisse).</li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="functions.html" class="btn btn-neutral float-right" title="Funktsioonid" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="move.html" class="btn btn-neutral float-left" title="Programmeerime ROS roboti sõitma" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Litsents CC BY-ND-NC, Madis Kaspar Nigol, Veiko Vunder, Renno Raudmäe, Karl Kruusamäe

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>