

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="et" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="et" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Mis on kontroller? &mdash; ROS Koolitus 0.1 dokumentatsioon</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
        <script type="text/javascript" src="../_static/contentui.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/hacks.css" type="text/css" />
  <link rel="stylesheet" href="../_static/contentui.css" type="text/css" />
    <link rel="index" title="Indeks" href="../genindex.html" />
    <link rel="search" title="Otsing" href="../search.html" />
    <link rel="next" title="AR markerid" href="AR_markerid.html" />
    <link rel="prev" title="Funktsioonid" href="functions.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> ROS Koolitus
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">1. Päev</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../day1/linux_ylevaade.html">Linux: Ubuntu 16.04 sissejuhatus</a></li>
<li class="toctree-l1"><a class="reference internal" href="../day1/linux_kasurida.html">Linux: terminal ja käsurida</a></li>
<li class="toctree-l1"><a class="reference internal" href="../day1/linux_tarkvara_paigaldamine.html">Linux: Uue tarkvara paigaldamine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../day1/linux_programmide_kaivitamine.html">Linux: Programmide käivitamine käsurealt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../day1/ssh_robotisse.html">Kaugteel robotisse sisenemine (ssh)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../day1/roboti_draiveri_kaivitamine.html">Roboti ROS juhtprogrammi käivitamine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../day1/roboti_klaviatuurilt_juhtimine.html">Roboti juhtimine klaviatuuriga</a></li>
</ul>
<p class="caption"><span class="caption-text">2. Päev</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="sensors.html">Roboti andurite info kuvamine</a></li>
<li class="toctree-l1"><a class="reference internal" href="move.html">Programmeerime ROS roboti sõitma</a></li>
<li class="toctree-l1"><a class="reference internal" href="loops.html"><em>For</em>- ja <em>while</em> tsüklid roboti juhtimisel</a></li>
<li class="toctree-l1"><a class="reference internal" href="functions.html">Funktsioonid</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Mis on kontroller?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#sissejuhatus">Sissejuhatus</a></li>
<li class="toctree-l2"><a class="reference internal" href="#proovime-asjadele-mitte-otsa-soita">Proovime asjadele mitte otsa sõita</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vaatame-kuhu-poole-peaks-soitma-kui-uhes-kohas-asi-ees-on">Vaatame, kuhu poole peaks sõitma kui ühes kohas asi ees on.</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="AR_markerid.html">AR markerid</a></li>
</ul>
<p class="caption"><span class="caption-text">3. Päev</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../day3/2D_mapping.html">2D kaardistamine, automaatne navigeerimine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../day3/3D_mapping.html">3D kaardistamine</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ROS Koolitus</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Mis on kontroller?</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/day2/kontroller.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="mis-on-kontroller">
<h1>Mis on kontroller?<a class="headerlink" href="#mis-on-kontroller" title="Püsiviit sellele pealkirjale">¶</a></h1>
<div class="section" id="sissejuhatus">
<h2>Sissejuhatus<a class="headerlink" href="#sissejuhatus" title="Püsiviit sellele pealkirjale">¶</a></h2>
<p>Eelmises lõigus tutvustati, mis on andurid.
Nüüd on vaja ka teada, kuidas saame liigutada robotit sõltuvalt andurite näidust.
Selleks on olemas kontrollerid.
Kontrollerite ülesanne on sõltuvalt sisendist, näiteks andurite näidust,
muuta väljundit, näiteks mootorite kiirust.
Näiteks auto püsikiirusehoidja mõõdab kiirust ning annab selle järgi erinevalt gaasi.
Kui kiirus on väiksem kui soovitud, annab kontroller gaasi
ning kui kiirus on suurem kui soovitud, siis laseb gaasi lahti.
Ka selles praktikumis kirjutame ise kontrolleri.</p>
<p>Nüüd kui oleme aru saanud, kuidas need kaugused töötavad, on aeg neid kasutada.</p>
</div>
<div class="section" id="proovime-asjadele-mitte-otsa-soita">
<h2>Proovime asjadele mitte otsa sõita<a class="headerlink" href="#proovime-asjadele-mitte-otsa-soita" title="Püsiviit sellele pealkirjale">¶</a></h2>
<p><strong>Võtame lahti faili, kuhu hakkame koodi kirjutama</strong></p>
<ol class="arabic">
<li><p class="first">Ava terminal ning loo ssh-ühendus robotisse.</p>
</li>
<li><p class="first">Trüki terminali</p>
<p><strong>nano catkin_ws/src/robotont_blank_scripts/scripts/praktikum3_bangbang.py</strong></p>
<p>See avab Python’i faili, kus hakkame väärtusi muutma.</p>
</li>
</ol>
<p>Selleks, et me Python’is näeksime ja saaksime kasutada neid kaugusi, on meil muutuja nimega <em>distances</em>.
Sellel muutujal on meie jaoks olulised kolm väärtust,
mis on tabelis välja toodud.</p>
<blockquote>
<div><div class="figure">
<a class="reference internal image-reference" href="../_images/tabel.png"><img alt="../_images/tabel.png" src="../_images/tabel.png" style="width: 635.0px; height: 166.0px;" /></a>
</div>
</div></blockquote>
<p>Esialgu kasutame ainult <em>distances.centerMin</em> muutujat ning teeme robotile <em>bang-bang</em> kontrolleri.
<em>Bang-bang</em> kontroller ehk eestikeeli kaks-punkt reguleerimine on automaatreguleerimine,
kus lülitatakse seadet kahe oleku vahel, olenevalt anduri näidust.
Näiteks kui toas on liiga külm, lülitab radiaator end sisse, kui temperatuur on normis või üle,
lülitab end välja.</p>
<p>Meie robotiga kasutame <em>bang-bang</em> kontrollerit nõnda:</p>
<ul class="simple">
<li>Vaatame kui lähedal on eesolev asi</li>
<li>Kui asi on piisavalt kaugel või takistus puudub, sõidame otse</li>
<li>Kui asi on liiga lähedal, tagurdame</li>
</ul>
<p><strong>Ülesanne</strong></p>
<ol class="arabic">
<li><p class="first">Ava uus terminal ning loo samuti ssh-ühendus robotisse.</p>
</li>
<li><p class="first">Terminalis sisesta</p>
<p><strong>roslaunch robotont_teleop teleop_with_laserscan.launch</strong></p>
<p>See paneb käima ROSi draiveri, mis kontrollib rataste kiirusi vastavalt meie sõnumitele ning annab ka andmeid eesolevate takistuste kohta.</p>
</li>
<li><p class="first">Kasutades <strong>if-else</strong>-lauset (<a class="reference external" href="https://progeopik.cs.ut.ee/03_liitlaused.html">https://progeopik.cs.ut.ee/03_liitlaused.html</a>), kirjuta eelnevalt kirjeldatud <em>bang-bang</em> kontroller eelnevalt avatud <strong>praktikum3_bangbang.py</strong> faili.</p>
<p>Ülesanne on, et robot hoiaks end näiteks 0.5 meetri kaugusel takistusest.</p>
</li>
<li><p class="first">Kasuta väikeseid kiirusi (0.2 m/s või vähem).</p>
</li>
<li><p class="first">Salvesta fail, kasutades klahvikombinatsiooni Ctrl+X.</p>
</li>
<li><p class="first">Koodi käitamiseks sisesta terminali</p>
<p><strong>rosrun robotont_blank_scripts praktikum3_bangbang.py</strong></p>
<p>Ctrl+C paneb programmi kinni.</p>
</li>
<li><p class="first">Demonstreeri töötavat kontrollerit juhendajale.</p>
</li>
</ol>
</div>
<div class="section" id="vaatame-kuhu-poole-peaks-soitma-kui-uhes-kohas-asi-ees-on">
<h2>Vaatame, kuhu poole peaks sõitma kui ühes kohas asi ees on.<a class="headerlink" href="#vaatame-kuhu-poole-peaks-soitma-kui-uhes-kohas-asi-ees-on" title="Püsiviit sellele pealkirjale">¶</a></h2>
<p>Selles ülesandes peab robot oskama nurga alt lähenedes avast läbi sõita.</p>
<ol class="arabic">
<li><p class="first">Ava terminal ja loo ssh-ühendus robotisse ja sisesta</p>
<p><strong>roslaunch robotont_teleop teleop_with_laserscan.launch</strong></p>
<p>VÕI
kasuta eelmisest ülesandest juba käivat terminali.</p>
</li>
<li><p class="first">Võta ette uus terminal ning ava seal fail <strong>praktikum3_betweenposts.py</strong></p>
</li>
<li><p class="first">Kasutades teadmisi ja oskusi eelnevast ülesandest, kirjuta koodis ettenähtud kohta oma kood.
Selle koodi abil peab robot oskama nurga alt avale lähenedes avast läbi sõitma.
Nüüd on kasutada ka vasaku ja parema sektori kaugused.
Robot peab suutma avast läbi sõita mõlemal pildil näidatud juhul.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/yl2setup.png"><img alt="../_images/yl2setup.png" src="../_images/yl2setup.png" style="width: 750.4px; height: 281.4px;" /></a>
</div>
</li>
<li><p class="first">Koodi jooksutamiseks sisesta terminali</p>
<p><strong>rosrun robotont_blank_scripts praktikum3_betweenposts.py</strong></p>
</li>
<li><p class="first">Demonstreeri töötavat robotit juhendajale.</p>
</li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="AR_markerid.html" class="btn btn-neutral float-right" title="AR markerid" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="functions.html" class="btn btn-neutral float-left" title="Funktsioonid" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Litsents CC BY-ND-NC, Madis Kaspar Nigol, Veiko Vunder, Renno Raudmäe, Karl Kruusamäe

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>