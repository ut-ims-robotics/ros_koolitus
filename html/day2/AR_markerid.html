

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="et" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="et" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>AR markerid &mdash; ROS Koolitus 0.1 dokumentatsioon</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
        <script type="text/javascript" src="../_static/contentui.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/hacks.css" type="text/css" />
  <link rel="stylesheet" href="../_static/contentui.css" type="text/css" />
    <link rel="index" title="Indeks" href="../genindex.html" />
    <link rel="search" title="Otsing" href="../search.html" />
    <link rel="next" title="2D kaardistamine, automaatne navigeerimine" href="../day3/2D_mapping.html" />
    <link rel="prev" title="Mis on kontroller?" href="kontroller.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> ROS Koolitus
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">1. Päev</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../day1/linux_ylevaade.html">Linux: Ubuntu 16.04 sissejuhatus</a></li>
<li class="toctree-l1"><a class="reference internal" href="../day1/linux_kasurida.html">Linux: terminal ja käsurida</a></li>
<li class="toctree-l1"><a class="reference internal" href="../day1/linux_tarkvara_paigaldamine.html">Linux: Uue tarkvara paigaldamine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../day1/linux_programmide_kaivitamine.html">Linux: Programmide käivitamine käsurealt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../day1/ssh_robotisse.html">Kaugteel robotisse sisenemine (ssh)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../day1/roboti_draiveri_kaivitamine.html">Roboti ROS juhtprogrammi käivitamine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../day1/roboti_klaviatuurilt_juhtimine.html">Roboti juhtimine klaviatuuriga</a></li>
</ul>
<p class="caption"><span class="caption-text">2. Päev</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="sensors.html">Roboti andurite info kuvamine</a></li>
<li class="toctree-l1"><a class="reference internal" href="move.html">Programmeerime ROS roboti sõitma</a></li>
<li class="toctree-l1"><a class="reference internal" href="loops.html"><em>For</em>- ja <em>while</em> tsüklid roboti juhtimisel</a></li>
<li class="toctree-l1"><a class="reference internal" href="functions.html">Funktsioonid</a></li>
<li class="toctree-l1"><a class="reference internal" href="kontroller.html">Mis on kontroller?</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">AR markerid</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#mis-on-liitreaalsus-ar-ja-ar-markerid">Mis on liitreaalsus (AR) ja AR-markerid?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tuvastame-markeri-ja-visualiseerime-seda-rvizis">Tuvastame markeri ja visualiseerime seda RVizis</a></li>
<li class="toctree-l2"><a class="reference internal" href="#kuidas-tootab-koordinaatteljestik">Kuidas töötab koordinaatteljestik</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ulesanne-0">Ülesanne 0</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ulesanne-1">Ülesanne 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ulesanne-2">Ülesanne 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ulesanne-3">Ülesanne 3</a></li>
<li class="toctree-l2"><a class="reference internal" href="#boonus-ulesanne-4">BOONUS: Ülesanne 4</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">3. Päev</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../day3/2D_mapping.html">2D kaardistamine, automaatne navigeerimine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../day3/3D_mapping.html">3D kaardistamine</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ROS Koolitus</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>AR markerid</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/day2/AR_markerid.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ar-markerid">
<h1>AR markerid<a class="headerlink" href="#ar-markerid" title="Püsiviit sellele pealkirjale">¶</a></h1>
<div class="section" id="mis-on-liitreaalsus-ar-ja-ar-markerid">
<h2>Mis on liitreaalsus (AR) ja AR-markerid?<a class="headerlink" href="#mis-on-liitreaalsus-ar-ja-ar-markerid" title="Püsiviit sellele pealkirjale">¶</a></h2>
<p>Paljud on kuulnud virtuaalreaalsusest (VR),
kus kogu maailm on genereeritud arvuti poolt ning kasutajal on võimalus selles maailmas olla ja
sellega interakteeruda.
Liitreaalsus ehk lühidalt AR (ingl <em>augmented reality</em>) ühendab päris maailma ja virtuaalmaailma.
AR’is on seotud päris maailma pildiga virtuaalsed objektid, näiteks uuematele telefonidele on äpid,
kus filmid näiteks lauda ja selle laua peal hakkab telefoniekraanil mingi mehike tantsima.
Sellist sidusust saab ka praktilistel eesmärkidel ära kasutada.
Näiteks arstina saad uurida interaktiivselt patsiendi sisemust ilma teda lahti lõikamata.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/futu.png"><img alt="../_images/futu.png" src="../_images/futu.png" style="width: 840.0px; height: 428.4px;" /></a>
</div>
<p>AR-markerid on spetsiaalselt disainitud kujundid,
mille võid näiteks välja printida ja kuskile kleepida ja arvuti tunneb kaamera abil ära selle markeri asukoha,
suuna ning markeri numbri.
Nende markerite kasutamine aitab arvutil paremini aru saada, kuidas ja kus pärismaailmas asjad on ja näiteks,
et kuhu infot visualiseerida.
Meie kasutame AR-markereid, et aidata robotil aru saada, kuhu peaks liikuma.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/tags.png"><img alt="../_images/tags.png" src="../_images/tags.png" style="width: 436.8px; height: 436.8px;" /></a>
</div>
<p>Siin pildil on AR-markerid 0-8.</p>
</div>
<div class="section" id="tuvastame-markeri-ja-visualiseerime-seda-rvizis">
<h2>Tuvastame markeri ja visualiseerime seda RVizis<a class="headerlink" href="#tuvastame-markeri-ja-visualiseerime-seda-rvizis" title="Püsiviit sellele pealkirjale">¶</a></h2>
<p>Esmalt vaatame, kuidas robot markerit näeb.</p>
<ol class="arabic">
<li><p class="first">Selleks ava terminal ning loo ssh-ühendus robotisse.</p>
</li>
<li><p class="first">Uues terminalis sisesta</p>
<p><strong>roslaunch robotont_training robotont_ar.launch</strong></p>
<p>See paneb käima ROSi draiveri, mis kontrollib rataste kiirusi vastavalt meie sõnumitele
ning tunneb kaamera abil ära ning publitseerib AR-markerite asukoha.
<strong>Seda terminali ära kinni pane!</strong></p>
</li>
<li><p class="first">Ava uus terminal ning trüki sinna</p>
<p><strong>roslaunch robotont_description display_ar_marker.launch</strong></p>
</li>
<li><p class="first">Nüüd võta AR-marker kätte ning liiguta seda kaamera ees, peaksid nägema RVizis, et ilmub roboti ette marker.
Võid proovida ka mitut markerit korraga.
Kui ei ilmu, kutsu juhendaja.</p>
</li>
</ol>
</div>
<div class="section" id="kuidas-tootab-koordinaatteljestik">
<h2>Kuidas töötab koordinaatteljestik<a class="headerlink" href="#kuidas-tootab-koordinaatteljestik" title="Püsiviit sellele pealkirjale">¶</a></h2>
<p>3D-teljestikus on kolm telge, mida nimetame <em>x</em>, <em>y</em> ja <em>z</em>.
Pöörded ümber nende telgede on vastavalt <em>roll</em>, <em>pitch</em> ja <em>yaw</em>.
Demonstreerime neid, kasutades inimpead.
Edasi-tagasi liikumine on x-teljel, vasakule-paremale liikumine on y-telg ja üles-alla liikumine on z-telg.
Sellele vastavalt on <em>roll</em> pea kallutamine küljelt-küljele,
<em>pitch</em> on pea noogutamine üles-alla ja <em>yaw</em> on pea pööramine vasakule-paremale.</p>
<div class="figure">
<a class="reference internal image-reference" href="../_images/robotontaxes.png"><img alt="../_images/robotontaxes.png" src="../_images/robotontaxes.png" style="width: 410.2px; height: 601.3px;" /></a>
</div>
<p>Samuti kui me hoiame seda AR-markerit kaamera ees, siis kaugus kaamerast otse on x-telg ja seda,
kui palju marker on kaamera keskelt kõrvale kaldunud,
näitab y-telg. <em>roll</em>, <em>pitch</em> ja <em>yaw</em> ehk RPY sõltuvad sellest, kuidas markerit käes hoida.</p>
</div>
<div class="section" id="ulesanne-0">
<h2>Ülesanne 0<a class="headerlink" href="#ulesanne-0" title="Püsiviit sellele pealkirjale">¶</a></h2>
<p>Vaatame, mida näeb robot arvudena AR-markeri kohta.</p>
<ol class="arabic">
<li><p class="first">Ava uus terminal, loo ssh-ühendus robotisse ning trüki sinna</p>
<p><strong>rosrun robotont_blank_scripts praktikum4_ar.py</strong></p>
</li>
<li><p class="first">Nüüd kui paned AR-markeri kaamera ette (nii, et käega osa sellest ära ei kata),
siis peaksid terminalist nägema kus see marker kaamera suhtes asub.
Samuti saad teada, mis on markeri ID, seda pead hiljem ka kasutama.
Terminalis prinditakse välja „Marker ID“; mis on markeri number, „Marker: X Y Z“,
mis on markeri koordinaadid kaamera suhtes, „Direction from camera“,
mis näitab, mis suunas marker on kaamera suhtes ja „RPY“, mis on järjestikku
<em>roll</em>, <em>pitch</em> ja <em>yaw</em> väärtused.</p>
</li>
</ol>
</div>
<div class="section" id="ulesanne-1">
<h2>Ülesanne 1<a class="headerlink" href="#ulesanne-1" title="Püsiviit sellele pealkirjale">¶</a></h2>
<p>Tee programm, mis liigub edasi-tagasi vastavalt AR-markeri kaugusele.</p>
<ol class="arabic">
<li><p class="first">Ava uus terminal, loo ssh-ühendus ning seal ava praktikum4_ar.py fail, kasutades käsku</p>
<p><strong>nano catkin_ws/src/robotont_blank_scripts/scripts/praktikum4_ar.py</strong></p>
</li>
<li><p class="first">Otsi koodis kommentaar „CHANGE THIS NUMBER TO YOUR MARKER ID“
ja selle rea all muuda <em>marker.id</em> == väärtus end markerile vastavaks.</p>
</li>
<li><p class="first">Implementeeri funktsioon, mis liigub olenevalt AR-markeri kaugusest edasi või tagasi.
Robot peab proovima hoida AR-markeri endast alati 0.5 meetri kaugusel.
Selleks on sul ette tehtud funktsioon nimega <em>keep_distance</em>.
Funktsiooni argumentideks on markeri asukoht kaamera suhtes (<em>x</em>, <em>y</em>, <em>z</em>, <em>roll</em>, <em>pitch</em>, <em>yaw</em>)
ja roboti liikumissõnum <em>twist</em>, mida saad kasutada analoogselt <em>vel_msg</em> muutujaga 2. praktikumis.
Funktsioon peabki tagastama <em>twist</em> muutuja, ehk siis käsk, kuidas peab robot liikuma.
Eeskujuks võid võtta 3.praktikumis tehtud <em>bang-bang</em> kontrolleri.</p>
</li>
<li><p class="first">Skriptist väljumiseks Ctrl+X, salvesta ja skripti saad jooksutada käsuga</p>
<p><strong>rosrun robotont_blank_scripts praktikum4_ar.py</strong></p>
<p>Ctrl+C, et skript peatada.</p>
</li>
<li><p class="first">Demonstreeri töötavat kontrollerit juhendajale.</p>
</li>
</ol>
</div>
<div class="section" id="ulesanne-2">
<h2>Ülesanne 2<a class="headerlink" href="#ulesanne-2" title="Püsiviit sellele pealkirjale">¶</a></h2>
<p>Tee programm, mis liigub küljelt-küljele vastavalt AR-markeri asukohale</p>
<ol class="arabic simple">
<li>Ava <strong>praktikum4_ar.py</strong> fail.</li>
<li>Implementeeri funktsioon, mis liigub olenevalt AR-markeri y-koordinaadist küljelt küljele.
Robot peab proovima hoida AR-markeri enda jaoks keskel.
Selleks on koodis valmis pandud funktsioon <em>keep_center</em>.
NB! Samaaegselt töötab ka eelmises ülesandes tehtud funktsioon.</li>
<li>Demonstreeri töötavat kontrollerit juhendajale.</li>
</ol>
</div>
<div class="section" id="ulesanne-3">
<h2>Ülesanne 3<a class="headerlink" href="#ulesanne-3" title="Püsiviit sellele pealkirjale">¶</a></h2>
<p>Tee programm, mis pöörab vastavalt AR-markeri suunale mis pöörab nii, et AR-marker oleks otse vastas.</p>
<ol class="arabic simple">
<li>Ava <strong>praktikum4_ar.py</strong> fail.</li>
<li>Seal on valmis pandud funktsioon nimega <em>turn_towards_ar</em></li>
<li>Implementeeri funktsioon, mis pöörab AR-markeri poole. Eesmärk on, et kui AR-markerit pöörata, siis robot keerab nii, et marker oleks täpselt roboti vastas. Vihje: Jälgi mis väärtus markerit pöörates muutub, et teada, mille järgi robotit kontrollida.</li>
<li>Demonstreeri töötavat kontrollerit juhendajale.</li>
</ol>
</div>
<div class="section" id="boonus-ulesanne-4">
<h2>BOONUS: Ülesanne 4<a class="headerlink" href="#boonus-ulesanne-4" title="Püsiviit sellele pealkirjale">¶</a></h2>
<p>Tee programm, mis teeb ühe markeriga üht asja, teisega teist. Näiteks kui robotile näidata markerit number 3, teeb robot enda ümber tiiru, kui näidata markerit number 4, proovib robot hoida markerit poole meetri kaugusel nagu esimeses ülesandes.</p>
<ol class="arabic">
<li><p class="first">Ava praktikum4_ar_tricks.py fail, kasutades käsku</p>
<p><strong>nano catkin_ws/src/robotont_blank_scripts/scripts/praktikum4_ar_tricks.py</strong></p>
</li>
<li><p class="first">Kirjuta koodis märgitud alasse oma kood, millega robot teeb ühe markeri puhul üht trikki, teise markeriga teist trikki.</p>
</li>
<li><p class="first">Demonstreeri töötavat koodi juhendajale.</p>
</li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../day3/2D_mapping.html" class="btn btn-neutral float-right" title="2D kaardistamine, automaatne navigeerimine" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="kontroller.html" class="btn btn-neutral float-left" title="Mis on kontroller?" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Litsents CC BY-ND-NC, Madis Kaspar Nigol, Veiko Vunder, Renno Raudmäe, Karl Kruusamäe

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>